CREATE TABLE IF NOT EXISTS candidate (
	id bigint primary key generated by default as identity,
	email text NOT NULL default '',
	password text NOT NULL default '',
	name text NOT NULL default '',
	birth_date date NOT NULL,
	cpf text NOT NULL default '',
	telephone text NOT NULL default '',
	address text NOT NULL default '',
	creation_date timestamp with time zone NOT NULL default now(),
	last_update_date timestamp with time zone NOT NULL default now()
);

CREATE TABLE IF NOT EXISTS institution_line_of_work(
	id bigint primary key generated by default as identity,
	name text NOT NULL default ''
);

CREATE TABLE IF NOT EXISTS institution(
	id bigint primary key generated by default as identity,
	line_of_work_id bigint NOT NULL,
	email text NOT NULL default '',
	password text NOT NULL default '',
	name text NOT NULL default '',
	cnpj text NOT NULL default '',
  	telephone text NOT NULL default '',
	address text NOT NULL default '',
	creation_date timestamp with time zone NOT NULL default now(),
	last_update_date timestamp with time zone NOT NULL default now(),

	FOREIGN KEY(line_of_work_id)
		REFERENCES institution_line_of_work(id)
);

/*
tabela para requisitos?
tabela para causas?*/
CREATE TABLE IF NOT EXISTS volunteer_opportunity(
	id bigint primary key generated by default as identity,
	institution_id bigint NOT NULL,
	name text NOT NULL default '',
	description text default '',
	address text NOT NULL default '',
	opportunity_date date NOT NULL,
	creation_date timestamp with time zone NOT NULL default now(),
	last_update_date timestamp with time zone NOT NULL default now(),

	FOREIGN KEY(institution_id)
		REFERENCES institution(id)
);

CREATE TABLE IF NOT EXISTS participation_certificate(
	id bigint primary key generated by default as identity,
	candidate_id bigint NOT NULL,
	volunteer_opportunity_id bigint NOT NULL,	
	creation_date timestamp with time zone NOT NULL default now(),
	
	FOREIGN KEY(candidate_id)
		REFERENCES candidate(id),
	
	FOREIGN KEY(volunteer_opportunity_id)
		REFERENCES volunteer_opportunity(id)
);
